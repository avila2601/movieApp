import{Gb as b,V as d,ja as l}from"./chunk-J5NQ2W5G.js";import{a as c,b as a}from"./chunk-2VMXMS7J.js";function v(r){return r?.injector||d(v),b(a(c({},r),{loader:void 0,stream:t=>{let u,o=()=>u.unsubscribe();t.abortSignal.addEventListener("abort",o);let i=l({value:void 0}),n,f=new Promise(e=>n=e);function s(e){i.set(e),n?.(i),n=void 0}return u=r.loader(t).subscribe({next:e=>s({value:e}),error:e=>{s({error:e}),t.abortSignal.removeEventListener("abort",o)},complete:()=>{n&&s({error:new Error("Resource completed before producing a value")}),t.abortSignal.removeEventListener("abort",o)}}),f}}))}export{v as a};
