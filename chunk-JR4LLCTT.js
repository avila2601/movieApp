import{i as C,n as T}from"./chunk-CICEWSG5.js";import{Ea as w,Eb as S,Ib as B,Ja as V,Oa as j,Pa as H,Q as p,Ra as d,Ua as Y,Va as b,Wa as x,X as f,Xa as r,Y as _,Ya as s,Z as D,Za as m,_ as I,_a as M,bb as c,cb as v,ha as E,ib as h,jb as $,kb as z,ra as P,ta as R,ua as a}from"./chunk-J5NQ2W5G.js";import"./chunk-2VMXMS7J.js";var O=(o,e)=>e.id;function A(o,e){if(o&1){let t=M();r(0,"div",7),m(1,"img",10),r(2,"div",11)(3,"div",12)(4,"h3",13),h(5),s(),r(6,"div",14)(7,"button",15),c("click",function(){let n=f(t).$implicit,l=v();return _(l.verTrailer(n.id))}),h(8," \u25B6\uFE0F Ver Trailer "),s(),r(9,"button",15),c("click",function(){let n=f(t).$implicit,l=v();return _(l.goToDetails(n.id))}),h(10," \u2139\uFE0F M\xE1s informaci\xF3n "),s()()()()()}if(o&2){let t=e.$implicit,i=v();a(),d("src",i.getImageUrl(t.poster_path),P)("alt",t.title),a(4),$(t.title)}}var y=class o{title=E("Trending");movies=E.required();page=0;pageSize=4;get pagedMovies(){let e=this.page*this.pageSize;return this.movies().slice(e,e+this.pageSize)}nextPage(){(this.page+1)*this.pageSize<this.movies().length&&this.page++}prevPage(){this.page>0&&this.page--}_imageService=p(B);_router=p(C);_moviesService=p(T);getImageUrl(e){return this._imageService.getImageUrl(e)}goToDetails(e){this._router.navigate(["/movies",e]).then(()=>{setTimeout(()=>{this.smoothScrollTo(window.innerHeight-130,800)},100)})}verTrailer(e){this._moviesService.getMovieTrailer(e).subscribe(t=>{let i=t.results.find(n=>n.site==="YouTube"&&n.type==="Trailer");i?window.open(`https://www.youtube.com/watch?v=${i.key}`,"_blank"):alert("No se encontr\xF3 tr\xE1iler para esta pel\xEDcula.")})}smoothScrollTo(e,t){let i=window.scrollY,n=e-i,l=performance.now(),u=k=>{let F=k-l,g=Math.min(F/t,1);window.scrollTo(0,i+n*this.easeInOutQuad(g)),g<1&&requestAnimationFrame(u)};requestAnimationFrame(u)}easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=w({type:o,selectors:[["app-movie-row"]],inputs:{title:[1,"title"],movies:[1,"movies"]},decls:13,vars:3,consts:[[1,"w-full","mt-8","px-4"],[1,"mb-4","text-xl","font-semibold","text-white","md:text-2xl"],[1,"flex","items-center"],[1,"p-3","mr-2","text-white","transition-all","duration-300","rounded-full","shadow-lg","bg-netflix-red","hover:bg-netflix-red-dark","disabled:opacity-30","flex","items-center","justify-center",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"grid","grid-cols-2","gap-4","md:grid-cols-4","flex-1"],[1,"relative","transition","duration-200","ease-in","transform","cursor-pointer","group","sm:hover:scale-105"],[1,"p-3","ml-2","text-white","transition-all","duration-300","rounded-full","shadow-lg","bg-netflix-red","hover:bg-netflix-red-dark","disabled:opacity-30","flex","items-center","justify-center",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"object-cover","w-full","rounded-md",3,"src","alt"],[1,"absolute","inset-0","rounded-md","flex","items-center","justify-center","transition-all","duration-200","bg-black","bg-opacity-0","group-hover:bg-opacity-60"],[1,"p-4","text-center","text-white","opacity-0","group-hover:opacity-100"],[1,"font-semibold"],[1,"flex","space-x-2","justify-center","mt-2"],[1,"p-2","rounded-md","bg-white/20","hover:bg-white/40",3,"click"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"h2",1),h(2),s(),r(3,"div",2)(4,"button",3),c("click",function(){return i.prevPage()}),D(),r(5,"svg",4),m(6,"path",5),s()(),I(),r(7,"div",6),b(8,A,11,3,"div",7,O),s(),r(10,"button",8),c("click",function(){return i.nextPage()}),D(),r(11,"svg",4),m(12,"path",9),s()()()()),t&2&&(a(2),z(" ",i.title()," "),a(2),d("disabled",i.page===0),a(4),x(i.pagedMovies),a(2),d("disabled",(i.page+1)*i.pageSize>=i.movies().length))},encapsulation:2})};var Q=()=>[import("./chunk-PVJXLTTY.js").then(o=>o.MovieCardComponent)];function U(o,e){if(o&1){let t=M();r(0,"button",3),c("click",function(){let n=f(t).$implicit,l=v(2);return _(l.goToDetails(n.id))}),m(1,"app-movie-card",4),s()}if(o&2){let t=e.$implicit;a(),d("movie",t)}}function G(o,e){if(o&1&&(r(0,"div",1),b(1,U,2,1,"button",2,Y),s()),o&2){let t=v();a(),x(t.movies())}}function W(o,e){o&1&&(r(0,"div",5),m(1,"div",6),s())}var L=class o{isLoading=S(()=>this._moviesService.isLoading());hasMorePages=S(()=>this._moviesService.hasMorePages());_moviesService=p(T);_router=p(C);movies=this._moviesService.movies;trendingMovies=S(()=>this._moviesService.trendingMovies());onScroll(){if(!this.isLoading()&&this.hasMorePages()){let e=window.innerHeight+window.scrollY,t=document.documentElement.scrollHeight-200;e>=t&&this._moviesService.getMovies()}}goToDetails(e){sessionStorage.setItem("movie-scroll",window.scrollY.toString()),this._router.navigate(["/movies",e]).then(()=>{setTimeout(()=>{this.smoothScrollTo(window.innerHeight-130,800)},100)})}smoothScrollTo(e,t){let i=window.scrollY,n=e-i,l=performance.now(),u=k=>{let F=k-l,g=Math.min(F/t,1);window.scrollTo(0,i+n*this.easeInOutQuad(g)),g<1&&requestAnimationFrame(u)};requestAnimationFrame(u)}easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=w({type:o,selectors:[["app-movies"]],hostBindings:function(t,i){t&1&&c("scroll",function(){return i.onScroll()},!1,R)},decls:5,vars:2,consts:[[3,"title","movies"],[1,"grid","grid-col-2","gap-4","px-4","mx-auto","mt-6","max-w-7xl","md:grid-cols-4","lg:grid-cols-6"],[1,"w-full","text-left"],[1,"w-full","text-left",3,"click"],[1,"w-full",3,"movie"],[1,"flex","justify-center","p-4"],[1,"w-8","h-8","border-b-2","border-white","rounded-full","animate-spin"]],template:function(t,i){t&1&&(m(0,"app-movie-row",0),V(1,G,3,0)(2,W,2,0),j(3,1,Q,null,2),H(0,-1)),t&2&&d("title","Popular Movies")("movies",i.trendingMovies())},dependencies:[y],encapsulation:2})};export{L as MoviesComponent};
