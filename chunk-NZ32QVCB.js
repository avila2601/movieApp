import{f as p}from"./chunk-6UOHAPVV.js";import{H as o,K as a,Q as n,ja as i}from"./chunk-PA2HHXA4.js";var v=class s{movies=i([]);trendingMovies=i([]);selectedMovie=i(null);currentPage=i(1);hasMorePages=i(!0);isLoading=i(!1);_apiKey="d3ca801f868f5ad16989acc1ff252106";_apiUrl="https://api.themoviedb.org/3";_http=n(p);constructor(){this.getMovies(),this.getTrending()}getMovieById(e){return this._http.get(`${this._apiUrl}/movie/${e}?api_key=${this._apiKey}`)}getMovies(){this._http.get(`${this._apiUrl}/movie/popular?api_key=${this._apiKey}&page=${this.currentPage()}`).pipe(o(e=>{let t=this.movies();this.movies.set([...t,...e.results]),this.hasMorePages.set(e.page<e.total_pages),this.currentPage.update(r=>r+1),this.isLoading.set(!1)})).subscribe()}getTrending(){this._http.get(`${this._apiUrl}/trending/movie/day?api_key=${this._apiKey}`).pipe(o(e=>this.trendingMovies.set(e.results)),o(()=>this.setRandomMovie())).subscribe()}setRandomMovie(){let e=this.trendingMovies().length,t=this._getRandonInt(0,e),r=this.trendingMovies()[t];this.selectedMovie.set(r)}searchMovie(e){return this._http.get(`${this._apiUrl}/search/movie?api_key=${this._apiKey}&query=${e}`)}_getRandonInt(e=0,t=50){return Math.floor(Math.random()*(t-e))+e}static \u0275fac=function(t){return new(t||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{v as a};
